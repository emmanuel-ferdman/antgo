"use strict";(self["webpackChunkantgo_web"]=self["webpackChunkantgo_web"]||[]).push([[164],{9164:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var n=function(){var t=this,e=t._self._c;return e("b-container",{staticStyle:{"margin-top":"30px"}},[e("b-container",[t.samples_num>0?e("b-progress",{attrs:{value:t.index+1,max:t.samples_num,"show-progress":"",animated:""}}):t._e()],1),e("b-badge",{attrs:{href:"#",variant:"secondary"}},[t._v("索引 "+t._s(t.index)+"/"+t._s(t.samples_num))]),e("b-container",[e("b-row",{staticStyle:{"margin-bottom":"20px"}},t._l(t.samples,(function(a,n){return e("b-col",{key:n,staticStyle:{display:"flex","justify-content":"center"}},[e("h5",[t._v(" 名称："+t._s(a["title"]))])])})),1),e("b-row",t._l(t.samples,(function(a,n){return e("b-col",{key:n,staticStyle:{display:"flex","justify-content":"center"}},["IMAGE"==a["type"]?e("div",{staticStyle:{width:"800px",height:"100%"}},[e("canvas",{staticStyle:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},attrs:{id:"canvas_"+n}})]):e("div",[t._v(" "+t._s(a["data"])+" ")])])})),1),t.tags.length>0?e("b-row",t._l(t.samples,(function(a,n){return e("b-col",{key:n,staticStyle:{display:"flex","justify-content":"center"}},[e("b-form-group",[e("b-form-checkbox-group",{model:{value:a["tag"],callback:function(e){t.$set(a,"tag",e)},expression:"sample['tag']"}},t._l(t.tags,(function(a,n){return e("b-form-checkbox",{key:n,attrs:{value:a}},[t._v(t._s(a))])})),1)],1)],1)})),1):t._e(),e("b-row",{staticStyle:{"margin-top":"10px",display:"flex","flex-wrap":"nowrap","justify-content":"center","flex-direction":"row","align-items":"center"}},[e("b-button-group",[e("b-button",{staticClass:"btn btn-default",on:{click:function(e){return t.prev()}}},[t._v("上一个")]),e("b-button",{staticClass:"btn btn-default",on:{click:function(e){return t.next()}}},[t._v("下一个")]),e("b-button",{staticClass:"btn btn-default",on:{click:function(e){return t.randomone()}}},[t._v("随机")])],1)],1)],1),e("b-container",{staticStyle:{"margin-top":"10px",display:"flex","flex-wrap":"nowrap","justify-content":"center","flex-direction":"row","align-items":"center"}})],1)},s=[],l={name:"Browser",data(){return{samples_num:0,index:0,samples:[],tags:[],color_map:["#00BFFF","#00F5FF","#7FFFD4","#54FF9F","#00FF00","#FFF68F","#FFFFE0","#FFFF00","#FFD700","#FFC1C1"]}},mounted:function(){var t=this;t.axios.get("/antgo/api/browser/sample/entry/").then((function(e){t.samples=e.data.content["value"],t.index=e.data.content["step"],t.tags=e.data.content["tags"],t.samples_num=e.data.content["samples_num"],t.freshsamples()})).catch((function(e){console.log(e),t.index=-1}))},methods:{prev:function(){var t=this;t.axios.get("/antgo/api/browser/sample/prev/",{params:{step:t.index,data:JSON.stringify(t.samples)}}).then((function(e){t.samples=e.data.content["value"],t.index=e.data.content["step"],t.tags=e.data.content["tags"],t.freshsamples()})).catch((function(t){console.log(t)}))},next:function(){var t=this;t.axios.get("/antgo/api/browser/sample/next/",{params:{step:t.index,data:JSON.stringify(t.samples)}}).then((function(e){t.samples=e.data.content["value"],t.index=e.data.content["step"],t.tags=e.data.content["tags"],t.freshsamples()})).catch((function(t){console.log(t)}))},randomone:function(){var t=this;t.axios.get("/antgo/api/browser/sample/random/",{params:{step:t.index,data:JSON.stringify(t.samples)}}).then((function(e){t.samples=e.data.content["value"],t.index=e.data.content["step"],t.tags=e.data.content["tags"],t.freshsamples()})).catch((function(t){console.log(t)}))},freshsamples:function(){this.$nextTick((()=>{var t=this;for(var e in t.samples)if("IMAGE"==t.samples[e]["type"]){var a=document.getElementById("canvas_"+e),n=a.getContext("2d"),s=new Image;s.src=this.samples[e]["data"],s.onload=function(){if(s.complete){if(a.setAttribute("width",s.width),a.setAttribute("height",s.height),n.drawImage(s,0,0,s.width,s.height),"bboxes"in t.samples[e])if("labels"in t.samples[e]&&t.samples[e]["labels"].length>0)for(var l in t.samples[e]["bboxes"]){var o=t.samples[e]["bboxes"][l],i=t.samples[e]["labels"][l];i=parseInt(i);var r=t.color_map[i];t.drawRectWithText(n,o[0],o[1],o[2]-o[0],o[3]-o[1],r,i)}else for(var c in t.samples[e]["bboxes"]){var p=t.samples[e]["bboxes"][c],m=t.color_map[0];t.drawRect(n,p[0],p[1],p[2]-p[0],p[3]-p[1],m)}if("segments"in t.samples[e])if("labels"in t.samples[e]&&t.samples[e]["labels"].length>0)for(var f in t.samples[e]["segments"]){var u=t.samples[e]["segments"][f],d=t.samples[e]["labels"][f];d=parseInt(d);var g=t.color_map[d];t.drawSegment(n,u,g,d)}else for(var b in t.samples[e]["segments"]){var h=t.samples[e]["segments"][b],x=t.color_map[0];t.drawSegment(n,h,x,"")}}}}}))},drawRect:function(t,e,a,n,s,l){t.beginPath(),t.strokeStyle=l,t.lineWidth=4,t.strokeRect(e,a,n,s),t.fillStyle="rgba(255,255,255,0.5)",t.fillRect(e,a,n,s)},drawRectWithText:function(t,e,a,n,s,l,o){this.drawRect(t,e,a,n,s,l),t.fillStyle=l,t.font="20px Georgia",a<=10?t.fillText(o,e+10,a+10):t.fillText(o,e+10,a-10)},drawSegment:function(t,e,a,n){t.beginPath();for(var s=0;s<e.length;++s)t.lineTo(e[s][0],e[s][1]);for(var l=0,o=0,i=0;i<e.length;++i)l+=e[i][0],o+=e[i][1];l/=e.length,o/=e.length,t.font="20px Georgia",t.fillText(n,l,o),t.closePath(),t.strokeStyle=a,t.lineWidth=4,t.stroke(),t.fillStyle="rgba(255,255,255,0.5)",t.fill()},drawSkeleton:function(t,e,a,n){}}},o=l,i=a(1001),r=(0,i.Z)(o,n,s,!1,null,"ea955a32",null),c=r.exports}}]);
//# sourceMappingURL=164.bc3ce291.js.map