"use strict";(self["webpackChunkantgo_web"]=self["webpackChunkantgo_web"]||[]).push([[639],{8639:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var n=function(){var t=this,e=t._self._c;return e("b-container",{staticStyle:{"margin-top":"30px"}},[t.samples_num>0?e("b-progress",{attrs:{value:t.index+1,max:t.samples_num,"show-progress":"",animated:""}}):t._e(),e("b-container",{staticStyle:{"margin-top":"30px","margin-bottom":"30px",display:"flex","flex-wrap":"nowrap","justify-content":"center","flex-direction":"row","align-items":"center"}},[e("b-button-group",{staticStyle:{"margin-right":"30px"}},[e("b-button",{attrs:{variant:"success"},on:{click:function(e){return t.prev()}}},[t._v("上一个")]),e("b-button",{attrs:{variant:"warning"},on:{click:function(e){return t.next()}}},[t._v("下一个")])],1),e("div",[e("b-badge",{attrs:{href:"#",variant:"secondary"}},[t._v("索引 "+t._s(t.index))])],1)],1),e("b-container",[e("b-row",{staticStyle:{"margin-bottom":"20px"}},t._l(t.samples,(function(a,n){return e("b-col",{key:n,staticStyle:{display:"flex","justify-content":"center"}},[t._v(" "+t._s(a["title"])+" ")])})),1),e("b-row",{staticStyle:{"margin-bottom":"20px"}},t._l(t.samples,(function(a,n){return e("b-col",{key:n,staticStyle:{display:"flex","justify-content":"center"}},["IMAGE"==a["type"]?e("div",{staticStyle:{width:"800px",height:"600px"}},[e("canvas",{staticStyle:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},attrs:{id:"canvas_"+n}})]):e("div",[t._v(" "+t._s(a["data"])+" ")])])})),1),e("b-row",{staticStyle:{"margin-bottom":"20px"}},t._l(t.samples,(function(a,n){return e("b-col",{key:n,staticStyle:{display:"flex","justify-content":"center"}},[e("b-form-group",[e("b-form-checkbox-group",{model:{value:a["tag"],callback:function(e){t.$set(a,"tag",e)},expression:"sample['tag']"}},t._l(t.tags,(function(a,n){return e("b-form-checkbox",{key:n,attrs:{value:a}},[t._v(t._s(a))])})),1)],1)],1)})),1)],1)],1)},s=[],i={name:"Browser",data(){return{samples_num:0,index:0,samples:[],tags:[],color_map:["#00BFFF","#00F5FF","#7FFFD4","#54FF9F","#00FF00","#FFF68F","#FFFFE0","#FFFF00","#FFD700","#FFC1C1"]}},mounted:function(){var t=this;t.axios.get("/antgo/api/browser/sample/entry/").then((function(e){t.samples=e.data.content["value"],t.index=e.data.content["step"],t.tags=e.data.content["tags"],t.samples_num=e.data.content["samples_num"],t.freshsamples()})).catch((function(e){console.log(e),t.index=-1}))},methods:{prev:function(){var t=this;t.axios.get("/antgo/api/browser/sample/prev/",{params:{step:t.index,data:JSON.stringify(t.samples)}}).then((function(e){t.samples=e.data.content["value"],t.index=e.data.content["step"],t.tags=e.data.content["tags"],t.freshsamples()})).catch((function(t){console.log(t)}))},next:function(){var t=this;t.axios.get("/antgo/api/browser/sample/next/",{params:{step:t.index,data:JSON.stringify(t.samples)}}).then((function(e){t.samples=e.data.content["value"],t.index=e.data.content["step"],t.tags=e.data.content["tags"],t.freshsamples()})).catch((function(t){console.log(t)}))},freshsamples:function(){this.$nextTick((()=>{var t=this;for(var e in t.samples)if("IMAGE"==t.samples[e]["type"]){var a=document.getElementById("canvas_"+e),n=a.getContext("2d"),s=new Image;s.src=this.samples[e]["data"],s.onload=function(){if(s.complete&&(a.setAttribute("width",s.width),a.setAttribute("height",s.height),n.drawImage(s,0,0,s.width,s.height),"bboxes"in t.samples[e]))if("labels"in t.samples[e]&&t.samples[e]["labels"].length>0)for(var i in t.samples[e]["bboxes"]){var o=t.samples[e]["bboxes"][i],r=t.samples[e]["labels"][i];r=parseInt(r);var l=t.color_map[r];t.drawRectWithText(n,o[0],o[1],o[2]-o[0],o[3]-o[1],l,r)}else for(var c in t.samples[e]["bboxes"]){var p=t.samples[e]["bboxes"][c],m=t.color_map[0];t.drawRect(n,p[0],p[1],p[2]-p[0],p[3]-p[1],m)}}}}))},drawRect:function(t,e,a,n,s,i){t.beginPath(),t.strokeStyle=i,t.lineWidth=2,t.strokeRect(e,a,n,s)},drawRectWithText:function(t,e,a,n,s,i,o){this.drawRect(t,e,a,n,s,i),t.fillStyle=i,a<=10?t.fillText(o,e+10,a+10):t.fillText(o,e+10,a-10)},drawSegment:function(t,e,a){},drawSkeleton:function(t,e,a,n){}}},o=i,r=a(1001),l=(0,r.Z)(o,n,s,!1,null,"2b60dfb2",null),c=l.exports}}]);
//# sourceMappingURL=639.9872a3aa.js.map